# @dbx/multi-lang

Multi-language support package for DBDiagram.

## Structure

```
dbx-multi-lang/
├── src/
│   └── index.js       # Entry point that imports and exports locale messages
├── locales/           # YAML locale files (source)
│   ├── en/           # English translations
│   └── vi/           # Vietnamese translations
├── dist/             # Built output (generated by Vite)
├── vite.config.js    # Vite library build configuration
└── package.json
```

## Scripts

```bash
# Build the package (generates dist/index.cjs and dist/index.mjs)
yarn build

# Clean build artifacts
yarn clean

# Link the package for local development
yarn link
```

## Development Workflow

1. **Edit locale files** in `locales/{locale}/` directories

2. **Build the package**:
   ```bash
   yarn build
   ```

3. **Link to dbdiagram-frontend**:
   ```bash
   # In dbx-multi-lang
   yarn link

   # In dbdiagram-frontend
   yarn link @dbx/multi-lang
   ```

4. **Start dbdiagram-frontend**:
   ```bash
   cd /path/to/dbdiagram-frontend
   yarn dev
   ```

## Adding a New Locale

1. Create a new directory in `locales/` with the locale code (e.g., `ja/`)
2. Add YAML translation files matching the structure of existing locales
3. Update `src/index.js`:
   - Add locale to `SUPPORT_LOCALES` array
   - Import the new YAML files with `?raw` suffix
   - Add files to the `buildLocaleMessages` call
4. Run `yarn build`

## Build Output

The package produces dual formats (following the pattern of `@holistics/*` packages):
- `dist/index.cjs` - CommonJS format
- `dist/index.mjs` - ES Module format

## Exports

```javascript
import {
  SUPPORT_LOCALES,    // ['en', 'vi']
  DEFAULT_LOCALE,     // 'en'
  LOCALE_STORAGE_KEY, // 'dbdiagram-locale'
  messages           // { en: {...}, vi: {...} }
} from '@dbx/multi-lang';
```
